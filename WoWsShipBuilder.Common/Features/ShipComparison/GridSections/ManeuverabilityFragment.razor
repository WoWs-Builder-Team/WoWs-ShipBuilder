@using WoWsShipBuilder.Infrastructure.Localization.Resources
@using WoWsShipBuilder.Features.ShipComparison.GridData
@code {

    // Parameter needs to be named __builder, otherwise compilation will fail.
    // ReSharper disable once InconsistentNaming UnusedParameter.Local
    public static readonly RenderFragment<(Func<string, string, bool> IsColumnHidden, ILocalizer localizer)> ManeuverabilityDataFragment = element => __builder =>
    {
        string dataSectionString = ShipComparisonDataSections.Maneuverability.AsString();

        var unitKnots = $" {element.localizer.SimpleAppLocalization(nameof(Translation.Unit_Knots))}";
        var unitS = $" {element.localizer.SimpleAppLocalization(nameof(Translation.Unit_S))}";
        var unitM = $" {element.localizer.SimpleAppLocalization(nameof(Translation.Unit_M))}";
        var unitMps = $" {element.localizer.SimpleAppLocalization(nameof(Translation.Unit_MPS))}";

        var columnTitleMaxSpeed = element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilityMaxSpeed));
        var columnTitleMaxSpeedAtPeriscopeDepth = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilityMaxSpeed))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilitySubsMaxSpeedAtPeriscope))}";
        var columnTitleMaxSpeedAtMaxDepth = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilityMaxSpeed))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilitySubsMaxSpeedAtMaxDepth))}";
        var columnTitleMaxReverseSpeed = element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_MaxReverseSpeed));
        var columnTitleMaxReverseSpeedAtPeriscopeDepth = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_MaxReverseSpeed))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilitySubsMaxSpeedAtPeriscope))}";
        var columnTitleMaxReverseSpeedAtMaxDepth = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_MaxReverseSpeed))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilitySubsMaxSpeedAtMaxDepth))}";
        var columnTitleDiveSpeed = element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilitySubsMaxDiveSpeed));
        var columnTitleDivingPlaneShiftTime = element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilitySubsDivingPlaneShiftTime));
        var columnTitleRudderShiftTime = element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilityRudderShiftTime));
        var columnTitleTurningCircle = element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilityTurningCircle));
        var columnTitleFullAhead = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ForwardMaxSpeedTime))} {element.localizer.SimpleAppLocalization(nameof(Translation.AccelerationChart_Time))}";
        var columnTitleFullReverse = element.localizer.SimpleAppLocalization(nameof(Translation.ShipComparison_FullReverseTime));
        var columnTitleRudderProtection = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_RudderBlastProtection))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_BlastProtection))}";
        var columnTitleEngineProtection = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_EngineBlastProtection))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_BlastProtection))}";

        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleMaxSpeed}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleMaxSpeed)" T="GridDataWrapper" SortBy="@(x => x.ManeuverabilityData.MaxSpeed)" Title="@columnTitleMaxSpeed" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityData.MaxSpeed != 0)
                {
                    <MudText Typo="Typo.body2">
                        @(context.Item.ManeuverabilityData.MaxSpeed + unitKnots)
                    </MudText>
                }
                else
                {
                    @UtilityFragments.DataNotAvailableFragment
                }
            </CellTemplate>
        </TemplateColumn>

        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleMaxSpeedAtPeriscopeDepth}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleMaxSpeedAtPeriscopeDepth)" SortBy="@(x => x.ManeuverabilityData.MaxSpeedAtPeriscopeDepth)" T="GridDataWrapper" Title="@columnTitleMaxSpeedAtPeriscopeDepth" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityData.MaxSpeedAtPeriscopeDepth != 0)
                {
                    <MudText Typo="Typo.body2">
                        @(context.Item.ManeuverabilityData.MaxSpeedAtPeriscopeDepth + unitKnots)
                    </MudText>
                }
                else
                {
                    @UtilityFragments.DataNotAvailableFragment
                }
            </CellTemplate>
        </TemplateColumn>

        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleMaxSpeedAtMaxDepth}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleMaxSpeedAtMaxDepth)" SortBy="@(x => x.ManeuverabilityData.MaxSpeedAtMaxDepth)" T="GridDataWrapper" Title="@columnTitleMaxSpeedAtMaxDepth" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityData.MaxSpeedAtMaxDepth != 0)
                {
                    <MudText Typo="Typo.body2">
                        @(context.Item.ManeuverabilityData.MaxSpeedAtMaxDepth + unitKnots)
                    </MudText>
                }
                else
                {
                    @UtilityFragments.DataNotAvailableFragment
                }
            </CellTemplate>
        </TemplateColumn>

        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleMaxReverseSpeed}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleMaxReverseSpeed)" T="GridDataWrapper" SortBy="@(x => x.ManeuverabilityData.MaxReverseSpeed)" Title="@columnTitleMaxReverseSpeed" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityData.MaxReverseSpeed != 0)
                {
                    <MudText Typo="Typo.body2">
                        @(context.Item.ManeuverabilityData.MaxReverseSpeed + unitKnots)
                    </MudText>
                }
                else
                {
                    @UtilityFragments.DataNotAvailableFragment
                }
            </CellTemplate>
        </TemplateColumn>

        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleMaxReverseSpeedAtPeriscopeDepth}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleMaxReverseSpeedAtPeriscopeDepth)" SortBy="@(x => x.ManeuverabilityData.MaxReverseSpeedAtPeriscopeDepth)" T="GridDataWrapper" Title="@columnTitleMaxReverseSpeedAtPeriscopeDepth" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityData.MaxReverseSpeedAtPeriscopeDepth != 0)
                {
                    <MudText Typo="Typo.body2">
                        @(context.Item.ManeuverabilityData.MaxReverseSpeedAtPeriscopeDepth + unitKnots)
                    </MudText>
                }
                else
                {
                    @UtilityFragments.DataNotAvailableFragment
                }
            </CellTemplate>
        </TemplateColumn>

        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleMaxReverseSpeedAtMaxDepth}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleMaxReverseSpeedAtMaxDepth)" SortBy="@(x => x.ManeuverabilityData.MaxReverseSpeedAtMaxDepth)" T="GridDataWrapper" Title="@columnTitleMaxReverseSpeedAtMaxDepth" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityData.MaxReverseSpeedAtMaxDepth != 0)
                {
                    <MudText Typo="Typo.body2">
                        @(context.Item.ManeuverabilityData.MaxReverseSpeedAtMaxDepth + unitKnots)
                    </MudText>
                }
                else
                {
                    @UtilityFragments.DataNotAvailableFragment
                }
            </CellTemplate>
        </TemplateColumn>

        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleDiveSpeed}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleDiveSpeed)" SortBy="@(x => x.ManeuverabilityData.MaxDiveSpeed)" T="GridDataWrapper" Title="@columnTitleDiveSpeed" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityData.MaxDiveSpeed != 0)
                {
                    <MudText Typo="Typo.body2">
                        @(context.Item.ManeuverabilityData.MaxDiveSpeed + unitMps)
                    </MudText>
                }
                else
                {
                    @UtilityFragments.DataNotAvailableFragment
                }
            </CellTemplate>
        </TemplateColumn>

        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleDivingPlaneShiftTime}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleDivingPlaneShiftTime)" SortBy="@(x => x.ManeuverabilityData.DivingPlaneShiftTime)" T="GridDataWrapper" Title="@columnTitleDivingPlaneShiftTime" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityData.DivingPlaneShiftTime != 0)
                {
                    <MudText Typo="Typo.body2">
                        @(context.Item.ManeuverabilityData.DivingPlaneShiftTime + unitS)
                    </MudText>
                }
                else
                {
                    @UtilityFragments.DataNotAvailableFragment
                }
            </CellTemplate>
        </TemplateColumn>

        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleRudderShiftTime}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleRudderShiftTime)" T="GridDataWrapper" SortBy="@(x => x.ManeuverabilityData.RudderShiftTime)" Title="@columnTitleRudderShiftTime" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityData.RudderShiftTime != 0)
                {
                    <MudText Typo="Typo.body2">
                        @(context.Item.ManeuverabilityData.RudderShiftTime + unitS)
                    </MudText>
                }
                else
                {
                    @UtilityFragments.DataNotAvailableFragment
                }
            </CellTemplate>
        </TemplateColumn>

        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleTurningCircle}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleTurningCircle)" T="GridDataWrapper" SortBy="@(x => x.ManeuverabilityData.TurningCircle)" Title="@columnTitleTurningCircle" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityData.TurningCircle != 0)
                {
                    <MudText Typo="Typo.body2">
                        @(context.Item.ManeuverabilityData.TurningCircle + unitM)
                    </MudText>
                }
                else
                {
                    @UtilityFragments.DataNotAvailableFragment
                }
            </CellTemplate>
        </TemplateColumn>

        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleFullAhead}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleFullAhead)" T="GridDataWrapper" SortBy="@(x => x.ManeuverabilityData.TimeToFullAhead)" Title="@columnTitleFullAhead" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityData.TimeToFullAhead != 0)
                {
                    <MudText Typo="Typo.body2">
                        @(context.Item.ManeuverabilityData.TimeToFullAhead + unitS)
                    </MudText>
                }
                else
                {
                    @UtilityFragments.DataNotAvailableFragment
                }
            </CellTemplate>
        </TemplateColumn>

        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleFullReverse}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleFullReverse)" T="GridDataWrapper" SortBy="@(x => x.ManeuverabilityData.TimeToFullReverse)" Title="@columnTitleFullReverse" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityData.TimeToFullReverse != 0)
                {
                    <MudText Typo="Typo.body2">
                        @(context.Item.ManeuverabilityData.TimeToFullReverse + unitS)
                    </MudText>
                }
                else
                {
                    @UtilityFragments.DataNotAvailableFragment
                }
            </CellTemplate>
        </TemplateColumn>

        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleRudderProtection}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleRudderProtection)" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.ManeuverabilityData.RudderProtection)" Title="@columnTitleRudderProtection" HeaderClass="column-text-center" CellClass="column-text-center"/>

        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleEngineProtection}")" Hidden="@element.IsColumnHidden.Invoke(dataSectionString, columnTitleEngineProtection)" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.ManeuverabilityData.EngineProtection)" Title="@columnTitleEngineProtection" HeaderClass="column-text-center" CellClass="column-text-center"/>
    };
}
