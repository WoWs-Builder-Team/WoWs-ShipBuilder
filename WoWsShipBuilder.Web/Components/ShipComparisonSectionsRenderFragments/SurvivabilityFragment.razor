@using WoWsShipBuilder.ViewModels.Helper
@using WoWsShipBuilder.ViewModels.Other
@code {

    // Parameter needs to be named __builder, otherwise compilation will fail.
    // ReSharper disable once InconsistentNaming UnusedParameter.Local
    public static readonly RenderFragment<(ShipComparisonDataSections section, ILocalizer localizer, Dictionary<string, bool> hiddenColumns)> SurvivabilityDataFragment = element => __builder =>
    {
        bool hide = element.section != ShipComparisonDataSections.Survivability;
        string dataSectionString = ShipComparisonDataSections.Survivability.ShipComparisonDataSectionToString();

        var columnTitleHp = $"{element.localizer.SimpleAppLocalization(nameof(Translation.Unit_HP))}";
        var columnTitleFireMaxAmount = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Fire))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Max))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipComparison_Amount))}";
        var columnTitleFireMaxDuration = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Fire))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Max))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Duration))} ({element.localizer.SimpleAppLocalization(nameof(Translation.Unit_S))})";
        var columnTitleFireDps = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Fire))} {element.localizer.SimpleAppLocalization(Translation.Unit_DPS)}";
        var columnTitleFireMaxDmg = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Fire))} {element.localizer.SimpleAppLocalization(Translation.ShipStats_Max)} {element.localizer.SimpleAppLocalization(Translation.ShipStats_Damage)}";
        var columnTitleFireChanceReduction = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_FireReduction))} ({element.localizer.SimpleAppLocalization(Translation.Unit_PerCent)})";
        var columnTitleFloodingMaxAmount = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Flooding))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Max))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipComparison_Amount))}";
        var columnTitleFloodingMaxDuration = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Flooding))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Max))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Duration))} ({element.localizer.SimpleAppLocalization(nameof(Translation.Unit_S))})";
        var columnTitleFloodingDps = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Flooding))} {element.localizer.SimpleAppLocalization(Translation.Unit_DPS)}";
        var columnTitleFloodingMaxDmg = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_Flooding))} {element.localizer.SimpleAppLocalization(Translation.ShipStats_Max)} {element.localizer.SimpleAppLocalization(Translation.ShipStats_Damage)}";
        var columnTitleFloodingChanceReduction = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_TorpedoProtection))} ({element.localizer.SimpleAppLocalization(Translation.Unit_PerCent)})";

        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleHp}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleHp}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.SurvivabilityShipHp)" Title="@columnTitleHp" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleFireMaxAmount}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleFireMaxAmount}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.SurvivabilityFireMaxAmount)" Title="@columnTitleFireMaxAmount" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleFireMaxDuration}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleFireMaxDuration}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.SurvivabilityFireDuration)" Title="@columnTitleFireMaxDuration" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleFireDps}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleFireDps}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.SurvivabilityFireDps)" Title="@columnTitleFireDps" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleFireMaxDmg}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleFireMaxDmg}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.SurvivabilityFireMaxDmg)" Title="@columnTitleFireMaxDmg" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleFireChanceReduction}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleFireChanceReduction}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.SurvivabilityFireChanceReduction)" Title="@columnTitleFireChanceReduction" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleFloodingMaxAmount}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleFloodingMaxAmount}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.SurvivabilityFloodingMaxAmount)" Title="@columnTitleFloodingMaxAmount" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleFloodingMaxDuration}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleFloodingMaxDuration}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.SurvivabilityFloodingDuration)" Title="@columnTitleFloodingMaxDuration" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleFloodingDps}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleFloodingDps}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.SurvivabilityFloodingDps)" Title="@columnTitleFloodingDps" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleFloodingMaxDmg}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleFloodingMaxDmg}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.SurvivabilityFloodingMaxDmg)" Title="@columnTitleFloodingMaxDmg" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleFloodingChanceReduction}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleFloodingChanceReduction}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.SurvivabilityFloodingTorpedoProtection)" Title="@columnTitleFloodingChanceReduction" HeaderClass="column-text-center" CellClass="column-text-center"/>
    };
}