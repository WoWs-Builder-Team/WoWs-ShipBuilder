@using WoWsShipBuilder.ViewModels.Helper
@using WoWsShipBuilder.ViewModels.Other
@code {

    // Parameter needs to be named __builder, otherwise compilation will fail.
    // ReSharper disable once InconsistentNaming UnusedParameter.Local
    public static readonly RenderFragment<(ShipComparisonDataSections section, ILocalizer localizer, Dictionary<string, bool> hiddenColumns)> ManeuverabilityDataFragment = element => __builder =>
    {
        bool hide = element.section != ShipComparisonDataSections.Maneuverability;
        string dataSectionString = ShipComparisonDataSections.Maneuverability.ShipComparisonDataSectionToString();

        var columnTitleMaxSpeed = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilityMaxSpeed))} ({element.localizer.SimpleAppLocalization(Translation.Unit_Knots)})";
        var columnTitleMaxSpeedAtPeriscopeDepth = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilityMaxSpeed))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilitySubsMaxSpeedAtPeriscope))} ({element.localizer.SimpleAppLocalization(Translation.Unit_Knots)})";
        var columnTitleMaxSpeedAtMaxDepth = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilityMaxSpeed))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilitySubsMaxSpeedAtMaxDepth))} ({element.localizer.SimpleAppLocalization(Translation.Unit_Knots)})";
        var columnTitleRudderShiftTime = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilityRudderShiftTime))} ({element.localizer.SimpleAppLocalization(Translation.Unit_S)})";
        var columnTitleTurningCircle = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_ManeuverabilityTurningCircle))} ({element.localizer.SimpleAppLocalization(Translation.Unit_M)})";
        var columnTitleFullAhead = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_TimeToFullyAimed))} {element.localizer.SimpleAppLocalization(nameof(Translation.AccelerationChart_Time))} ({element.localizer.SimpleAppLocalization(Translation.Unit_S)})";
        var columnTitleFullReverse = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipComparison_FullReverseTime))} ({element.localizer.SimpleAppLocalization(Translation.Unit_S)})";
        var columnTitleRudderProtection = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_RudderBlastProtection))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_BlastProtection))}";
        var columnTitleEngineProtection = $"{element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_EngineBlastProtection))} {element.localizer.SimpleAppLocalization(nameof(Translation.ShipStats_BlastProtection))}";

        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleMaxSpeed}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleMaxSpeed}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.ManeuverabilityMaxSpeed)" Title="@columnTitleMaxSpeed" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleMaxSpeedAtPeriscopeDepth}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleMaxSpeedAtPeriscopeDepth}"])" T="GridDataWrapper" Title="@columnTitleMaxSpeedAtPeriscopeDepth" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityMaxSpeedAtPeriscopeDepth != 0)
                {
                    <MudText Typo="Typo.body2">
                        @context.Item.ManeuverabilityMaxSpeedAtPeriscopeDepth
                    </MudText>
                }
                else
                {
                    <MudText Typo="Typo.body2" Color="Color.Primary">
                        @ShipComparisonViewModel.DataNotAvailable
                    </MudText>
                }
            </CellTemplate>
        </TemplateColumn>
        <TemplateColumn ID="@($"{dataSectionString}_{columnTitleMaxSpeedAtMaxDepth}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleMaxSpeedAtMaxDepth}"])" T="GridDataWrapper" Title="@columnTitleMaxSpeedAtMaxDepth" HeaderClass="column-text-center" CellClass="column-text-center">
            <CellTemplate>
                @if (context.Item.ManeuverabilityMaxSpeedAtMaxDepth != 0)
                {
                    <MudText Typo="Typo.body2">
                        @context.Item.ManeuverabilityMaxSpeedAtMaxDepth
                    </MudText>
                }
                else
                {
                    <MudText Typo="Typo.body2" Color="Color.Primary">
                        @ShipComparisonViewModel.DataNotAvailable
                    </MudText>
                }
            </CellTemplate>
        </TemplateColumn>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleRudderShiftTime}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleRudderShiftTime}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.ManeuverabilityRudderShiftTime)" Title="@columnTitleRudderShiftTime" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleTurningCircle}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleTurningCircle}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.ManeuverabilityTurningCircle)" Title="@columnTitleTurningCircle" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleFullAhead}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleFullAhead}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.ManeuverabilityTimeToFullAhead)" Title="@columnTitleFullAhead" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleFullReverse}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleFullReverse}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.ManeuverabilityTimeToFullReverse)" Title="@columnTitleFullReverse" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleRudderProtection}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleRudderProtection}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.ManeuverabilityRudderProtection)" Title="@columnTitleRudderProtection" HeaderClass="column-text-center" CellClass="column-text-center"/>
        <PropertyColumn ID="@($"{dataSectionString}_{columnTitleEngineProtection}")" Hidden="@(hide && element.hiddenColumns[$"{dataSectionString}_{columnTitleEngineProtection}"])" T="GridDataWrapper" TProperty="decimal" Property="@(x => x.ManeuverabilityEngineProtection)" Title="@columnTitleEngineProtection" HeaderClass="column-text-center" CellClass="column-text-center"/>
    };
}